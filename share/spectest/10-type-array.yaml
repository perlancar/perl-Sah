tests: 
  - 
    input: []

    name: "type check: must accept []"
    schema: array
    valid: 1
  - 
    input: 
      - 1
      - a
    name: "type check: must accept - 1\n- a"
    schema: array
    valid: 1
  - 
    input: 
      - []

    name: "type check: must accept - []"
    schema: array
    valid: 1
  - 
    input: 1
    name: "type check: must reject 1"
    schema: array
    valid: 0
  - 
    input: a
    name: "type check: must reject a"
    schema: array
    valid: 0
  - 
    input: {}

    name: "type check: must reject {}"
    schema: array
    valid: 0
  - 
    input: ~
    name: must accept undefined value
    schema: array
    valid: 1
  - 
    input: ~
    name: req=0 must accept undefined value
    schema: 
      - array
      - req
      - 0
    valid: 1
  - 
    input: ~
    name: req=1 must reject undefined value
    schema: 
      - array
      - req
      - 1
    valid: 0
  - 
    input: &1 
      - 1
    name: forbidden=0 must accept defined value
    schema: 
      - array
      - forbidden
      - 0
    valid: 1
  - 
    input: *1
    name: forbidden=1 must reject defined value
    schema: 
      - array
      - forbidden
      - 1
    valid: 0
  - 
    input: ~
    name: "default: must accept valid default []"
    schema: 
      - array*
      - default
      - []

    valid: 1
  - 
    input: ~
    name: "default: must reject invalid default a"
    schema: 
      - array*
      - default
      - a
    valid: 0
  - 
    dies: 1
    input: *1
    name: clause (dies, unknown clause)
    schema: 
      - array*
      - clause
      - 
        - foo
        - 1
  - 
    input: *1
    name: clause (ok)
    schema: 
      - array*
      - clause
      - &2 
        - min_len
        - 0
    valid: 1
  - 
    input: *1
    name: clause (ok) + clause nok = nok
    schema: 
      - array*
      - clause
      - *2
      - max_len
      - 0
    valid: 0
  - 
    errors: 1
    input: *1
    name: clause (nok)
    schema: 
      - array*
      - clause
      - 
        - min_len
        - 2
    valid: 0
  - 
    dies: 1
    input: *1
    name: clset (dies, unknown clause)
    schema: 
      - array*
      - clset
      - 
        foo: 1
  - 
    dies: 1
    input: *1
    name: clset (dies, unknown attr)
    schema: 
      - array*
      - clset
      - 
        min_len: 1
        min_len.foo: 1
  - 
    input: *1
    name: clset (empty = ok)
    schema: 
      - array*
      - clset
      - {}

    valid: 1
  - 
    input: *1
    name: clset (ignored clause/attr = ok)
    schema: 
      - array*
      - clset
      - 
        _foo: 1
        foo._bar: 2
    valid: 1
  - 
    input: *1
    name: clset (ok + ok = ok)
    schema: 
      - array*
      - clset
      - 
        max_len: 1
        min_len: 0
    valid: 1
  - 
    input: *1
    name: clset (ok) + clause nok = nok
    schema: 
      - array*
      - clset
      - 
        min_len: 0
      - max_len
      - 0
    valid: 0
  - 
    input: *1
    name: clset (ok + nok = nok)
    schema: 
      - array*
      - clset
      - 
        max_len: 0
        min_len: 0
    valid: 0
  - 
    input: *1
    name: clset (nok + ok = nok)
    schema: 
      - array*
      - clset
      - 
        max_len: 1
        min_len: 2
    valid: 0
  - 
    input: *1
    name: clset (nok + nok = nok)
    schema: 
      - array*
      - clset
      - 
        max_len: 0
        min_len: 2
    valid: 0
  - 
    input: &4 []

    name: .err_level=error (clause=is, ok)
    schema: 
      - array
      - is
      - &3 []

    valid: 1
  - 
    input: &5 
      - 0
    name: .err_level=error (clause=is, nok)
    schema: 
      - array
      - is
      - *3
    valid: 0
  - 
    input: *4
    name: .err_level=warn (clause=is, ok)
    schema: 
      - array
      - is
      - *3
      - is.err_level
      - warn
    valid: 1
  - 
    input: *5
    name: .err_level=warn (clause=is, nok)
    schema: 
      - array*
      - is
      - *3
      - is.err_level
      - warn
    valid: 1
    warnings: 1
  - 
    input: &6 
      - 1
    name: "is: must accept same value"
    schema: 
      - array
      - is
      - *6
    valid: 1
  - 
    input: *6
    name: "is: must reject different value"
    schema: 
      - array
      - is
      - &7 
        - 2
    valid: 0
  - 
    input: *6
    name: "!is (nok)"
    schema: 
      - array
      - "!is"
      - *6
    valid: 0
  - 
    input: *6
    name: "!is (ok)"
    schema: 
      - array
      - "!is"
      - *7
    valid: 1
  - 
    input: *6
    name: is.op=not (nok)
    schema: 
      - array
      - is
      - *6
      - is.op
      - not
    valid: 0
  - 
    input: *6
    name: is.op=not (ok)
    schema: 
      - array
      - is
      - *7
      - is.op
      - not
    valid: 1
  - 
    input: *6
    name: is& (no items)
    schema: 
      - array
      - is&
      - []

    valid: 1
  - 
    input: *6
    name: is& (ok)
    schema: 
      - array
      - is&
      - &8 
        - *6
        - *6
    valid: 1
  - 
    errors: 1
    input: *6
    name: is& (nok + ok)
    schema: 
      - array
      - is&
      - 
        - *7
        - *6
    valid: 0
  - 
    errors: 1
    input: *6
    name: is& (ok + nok)
    schema: 
      - array
      - is&
      - 
        - *6
        - *7
    valid: 0
  - 
    errors: 1
    input: *6
    name: is& (nok + nok)
    schema: 
      - array
      - is&
      - 
        - *7
        - *7
    valid: 0
  - 
    input: *6
    name: is.op=and (no items)
    schema: 
      - array
      - is
      - []

      - is.op
      - and
    valid: 1
  - 
    input: *6
    name: is.op=and (ok)
    schema: 
      - array
      - is
      - *8
      - is.op
      - and
    valid: 1
  - 
    errors: 1
    input: *6
    name: is.op=and (nok + ok)
    schema: 
      - array
      - is
      - 
        - *7
        - *6
      - is.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=and (ok + nok)
    schema: 
      - array
      - is
      - 
        - *6
        - *7
      - is.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=and (nok + nok)
    schema: 
      - array
      - is
      - 
        - *7
        - *7
      - is.op
      - and
    valid: 0
  - 
    input: *6
    name: is| (no items)
    schema: 
      - array
      - is|
      - []

    valid: 1
  - 
    input: *6
    name: is| (ok)
    schema: 
      - array
      - is|
      - *8
    valid: 1
  - 
    input: *6
    name: is| (nok + ok)
    schema: 
      - array
      - is|
      - 
        - *7
        - *6
    valid: 1
  - 
    input: *6
    name: is| (ok + nok)
    schema: 
      - array
      - is|
      - 
        - *6
        - *7
    valid: 1
  - 
    errors: 1
    input: *6
    name: is| (nok + nok)
    schema: 
      - array
      - is|
      - 
        - *7
        - *7
    valid: 0
  - 
    input: *6
    name: is.op=or (no items)
    schema: 
      - array
      - is
      - []

      - is.op
      - or
    valid: 1
  - 
    input: *6
    name: is.op=or (ok)
    schema: 
      - array
      - is
      - *8
      - is.op
      - or
    valid: 1
  - 
    input: *6
    name: is.op=or (nok + ok)
    schema: 
      - array
      - is
      - 
        - *7
        - *6
      - is.op
      - or
    valid: 1
  - 
    input: *6
    name: is.op=or (ok + nok)
    schema: 
      - array
      - is
      - 
        - *6
        - *7
      - is.op
      - or
    valid: 1
  - 
    errors: 1
    input: *6
    name: is.op=or (nok + nok)
    schema: 
      - array
      - is
      - 
        - *7
        - *7
      - is.op
      - or
    valid: 0
  - 
    input: *6
    name: is.op=none (empty items)
    schema: 
      - array
      - is
      - []

      - is.op
      - none
    valid: 1
  - 
    input: *6
    name: is.op=none (nok + nok)
    schema: 
      - array
      - is
      - 
        - *7
        - *7
      - is.op
      - none
    valid: 1
  - 
    errors: 1
    input: *6
    name: is.op=none (nok + ok)
    schema: 
      - array
      - is
      - 
        - *7
        - *6
      - is.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=none (ok + nok)
    schema: 
      - array
      - is
      - 
        - *6
        - *7
      - is.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=none (ok + ok)
    schema: 
      - array
      - is
      - *8
      - is.op
      - none
    valid: 0
  - 
    input: *6
    name: "in: must accept valid choices"
    schema: 
      - array
      - in
      - &9 
        - *6
        - *7
    valid: 1
  - 
    input: *6
    name: "in: must reject empty choices"
    schema: 
      - array
      - in
      - []

    valid: 0
  - 
    input: *6
    name: "!in (nok)"
    schema: 
      - array
      - "!in"
      - *9
    valid: 0
  - 
    input: *6
    name: "!in (ok)"
    schema: 
      - array
      - "!in"
      - &10 []

    valid: 1
  - 
    input: *6
    name: in.op=not (nok)
    schema: 
      - array
      - in
      - *9
      - in.op
      - not
    valid: 0
  - 
    input: *6
    name: in.op=not (ok)
    schema: 
      - array
      - in
      - *10
      - in.op
      - not
    valid: 1
  - 
    input: *6
    name: in& (no items)
    schema: 
      - array
      - in&
      - []

    valid: 1
  - 
    input: *6
    name: in& (ok)
    schema: 
      - array
      - in&
      - &11 
        - *9
        - 
          - 
            - 1
          - 
            - 2
    valid: 1
  - 
    errors: 1
    input: *6
    name: in& (nok + ok)
    schema: 
      - array
      - in&
      - 
        - *10
        - *9
    valid: 0
  - 
    errors: 1
    input: *6
    name: in& (ok + nok)
    schema: 
      - array
      - in&
      - 
        - *9
        - *10
    valid: 0
  - 
    errors: 1
    input: *6
    name: in& (nok + nok)
    schema: 
      - array
      - in&
      - 
        - *10
        - &12 []

    valid: 0
  - 
    input: *6
    name: in.op=and (no items)
    schema: 
      - array
      - in
      - []

      - in.op
      - and
    valid: 1
  - 
    input: *6
    name: in.op=and (ok)
    schema: 
      - array
      - in
      - *11
      - in.op
      - and
    valid: 1
  - 
    errors: 1
    input: *6
    name: in.op=and (nok + ok)
    schema: 
      - array
      - in
      - 
        - *10
        - *9
      - in.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=and (ok + nok)
    schema: 
      - array
      - in
      - 
        - *9
        - *10
      - in.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=and (nok + nok)
    schema: 
      - array
      - in
      - 
        - *10
        - *12
      - in.op
      - and
    valid: 0
  - 
    input: *6
    name: in| (no items)
    schema: 
      - array
      - in|
      - []

    valid: 1
  - 
    input: *6
    name: in| (ok)
    schema: 
      - array
      - in|
      - *11
    valid: 1
  - 
    input: *6
    name: in| (nok + ok)
    schema: 
      - array
      - in|
      - 
        - *10
        - *9
    valid: 1
  - 
    input: *6
    name: in| (ok + nok)
    schema: 
      - array
      - in|
      - 
        - *9
        - *10
    valid: 1
  - 
    errors: 1
    input: *6
    name: in| (nok + nok)
    schema: 
      - array
      - in|
      - 
        - *10
        - *12
    valid: 0
  - 
    input: *6
    name: in.op=or (no items)
    schema: 
      - array
      - in
      - []

      - in.op
      - or
    valid: 1
  - 
    input: *6
    name: in.op=or (ok)
    schema: 
      - array
      - in
      - *11
      - in.op
      - or
    valid: 1
  - 
    input: *6
    name: in.op=or (nok + ok)
    schema: 
      - array
      - in
      - 
        - *10
        - *9
      - in.op
      - or
    valid: 1
  - 
    input: *6
    name: in.op=or (ok + nok)
    schema: 
      - array
      - in
      - 
        - *9
        - *10
      - in.op
      - or
    valid: 1
  - 
    errors: 1
    input: *6
    name: in.op=or (nok + nok)
    schema: 
      - array
      - in
      - 
        - *10
        - *12
      - in.op
      - or
    valid: 0
  - 
    input: *6
    name: in.op=none (empty items)
    schema: 
      - array
      - in
      - []

      - in.op
      - none
    valid: 1
  - 
    input: *6
    name: in.op=none (nok + nok)
    schema: 
      - array
      - in
      - 
        - *10
        - *12
      - in.op
      - none
    valid: 1
  - 
    errors: 1
    input: *6
    name: in.op=none (nok + ok)
    schema: 
      - array
      - in
      - 
        - *10
        - *9
      - in.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=none (ok + nok)
    schema: 
      - array
      - in
      - 
        - *9
        - *10
      - in.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=none (ok + ok)
    schema: 
      - array
      - in
      - *11
      - in.op
      - none
    valid: 0
  - 
    input: &13 
      - 1
    name: len (ok)
    schema: 
      - array
      - len
      - 1
    valid: 1
  - 
    input: *13
    name: len (nok)
    schema: 
      - array
      - len
      - 2
    valid: 0
  - 
    input: *13
    name: min_len (ok)
    schema: 
      - array
      - min_len
      - 1
    valid: 1
  - 
    input: *13
    name: min_len (nok)
    schema: 
      - array
      - min_len
      - 2
    valid: 0
  - 
    input: *13
    name: max_len (ok)
    schema: 
      - array
      - min_len
      - 1
    valid: 1
  - 
    input: &14 
      - 1
      - '1.2'
    name: max_len (nok)
    schema: 
      - array
      - max_len
      - 1
    valid: 0
  - 
    input: *13
    name: len_between (ok)
    schema: 
      - array
      - len_between
      - 
        - 1
        - 2
    valid: 1
  - 
    input: *14
    name: len_between (nok)
    schema: 
      - array
      - len_between
      - 
        - 1
        - 1
    valid: 0
  - 
    input: *14
    name: each_index (ok)
    schema: 
      - array
      - each_index
      - 
        - int
        - max
        - 1
    valid: 1
  - 
    input: *14
    name: each_index (nok)
    schema: 
      - array
      - each_index
      - 
        - int
        - xmax
        - 1
    valid: 0
  - 
    input: *14
    name: each_elem (ok)
    schema: 
      - array
      - each_elem
      - float
    valid: 1
  - 
    input: *14
    name: each_elem (nok)
    schema: 
      - array
      - each_elem
      - int
    valid: 0
  - 
    input: &15 
      - 1
      - '1.2'
    name: elems (ok)
    schema: 
      - array
      - elems
      - 
        - int
        - float
    valid: 1
  - 
    input: *15
    name: elems (nok)
    schema: 
      - array
      - elems
      - 
        - int
        - int
    valid: 0
  - 
    input: 
      - ~
      - 1
    name: elems (nok, first elem required)
    schema: &16 
      - array
      - 
        elems: 
          - int*
          - 
            - float
            - default
            - 2
    valid: 0
  - 
    input: 
      - 1
    name: elems (ok, missing elem set to undef)
    schema: *16
    valid: 1
  - 
    input: 
      - 1
      - ~
    name: elems (ok, second elem optional)
    schema: *16
    valid: 1
  - 
    input: 
      - 1
      - '1.1'
    name: elems (ok 2)
    schema: *16
    valid: 1
  - 
    input: 
      - 1
      - '1.1'
      - ~
    name: elems (ok, extra elems ignored)
    schema: *16
    valid: 1
  - 
    input: 
      - 1
      - '1.1'
      - foo
    name: elems (ok, extra elems ignored 2)
    schema: *16
    valid: 1
  - 
    input: 
      - 1
    name: elems (ok, create_default=0)
    output: 
      - 1
    schema: &17 
      - array
      - 
        elems: 
          - int
          - 
            - int
            - default
            - 2
        elems.create_default: 0
    valid: 1
  - 
    input: 
      - 1
      - ~
    name: elems (ok 2, create_default=0)
    output: 
      - 1
      - 2
    schema: *17
    valid: 1
version: v0.9.23 (generated by devscripts/gen-type-spectest on Wed Jan 30 10:27:52 2013)
