tests: 
  - 
    input: {}

    name: "type check: must accept {}"
    schema: hash
    valid: 1
  - 
    input: 
      a: 1
    name: "type check: must accept a: 1"
    schema: hash
    valid: 1
  - 
    input: 
      "": []

    name: "type check: must accept \"\": []"
    schema: hash
    valid: 1
  - 
    input: 1
    name: "type check: must reject 1"
    schema: hash
    valid: 0
  - 
    input: a
    name: "type check: must reject a"
    schema: hash
    valid: 0
  - 
    input: []

    name: "type check: must reject []"
    schema: hash
    valid: 0
  - 
    input: ~
    name: must accept undefined value
    schema: hash
    valid: 1
  - 
    input: ~
    name: req=0 must accept undefined value
    schema: 
      - hash
      - req
      - 0
    valid: 1
  - 
    input: ~
    name: req=1 must reject undefined value
    schema: 
      - hash
      - req
      - 1
    valid: 0
  - 
    input: &1 
      a: 1
    name: forbidden=0 must accept defined value
    schema: 
      - hash
      - forbidden
      - 0
    valid: 1
  - 
    input: *1
    name: forbidden=1 must reject defined value
    schema: 
      - hash
      - forbidden
      - 1
    valid: 0
  - 
    input: ~
    name: "default: must accept valid default {}"
    schema: 
      - hash*
      - default
      - {}

    valid: 1
  - 
    input: ~
    name: "default: must reject invalid default a"
    schema: 
      - hash*
      - default
      - a
    valid: 0
  - 
    dies: 1
    input: *1
    name: clause (dies, unknown clause)
    schema: 
      - hash*
      - clause
      - 
        - foo
        - 1
  - 
    input: *1
    name: clause (ok)
    schema: 
      - hash*
      - clause
      - &2 
        - min_len
        - 1
    valid: 1
  - 
    input: *1
    name: clause (ok) + clause nok = nok
    schema: 
      - hash*
      - clause
      - *2
      - max_len
      - 0
    valid: 0
  - 
    errors: 1
    input: *1
    name: clause (nok)
    schema: 
      - hash*
      - clause
      - 
        - min_len
        - 2
    valid: 0
  - 
    dies: 1
    input: *1
    name: clset (dies, unknown clause)
    schema: 
      - hash*
      - clset
      - 
        foo: 1
  - 
    dies: 1
    input: *1
    name: clset (dies, unknown attr)
    schema: 
      - hash*
      - clset
      - 
        min_len: 1
        min_len.foo: 1
  - 
    input: *1
    name: clset (empty = ok)
    schema: 
      - hash*
      - clset
      - {}

    valid: 1
  - 
    input: *1
    name: clset (ignored clause/attr = ok)
    schema: 
      - hash*
      - clset
      - 
        _foo: 1
        foo._bar: 2
    valid: 1
  - 
    input: *1
    name: clset (ok + ok = ok)
    schema: 
      - hash*
      - clset
      - 
        max_len: 1
        min_len: 1
    valid: 1
  - 
    input: *1
    name: clset (ok) + clause nok = nok
    schema: 
      - hash*
      - clset
      - 
        min_len: 1
      - max_len
      - 0
    valid: 0
  - 
    input: *1
    name: clset (ok + nok = nok)
    schema: 
      - hash*
      - clset
      - 
        max_len: 0
        min_len: 1
    valid: 0
  - 
    input: *1
    name: clset (nok + ok = nok)
    schema: 
      - hash*
      - clset
      - 
        max_len: 1
        min_len: 2
    valid: 0
  - 
    input: *1
    name: clset (nok + nok = nok)
    schema: 
      - hash*
      - clset
      - 
        max_len: 0
        min_len: 2
    valid: 0
  - 
    input: &4 
      a: 0
    name: .err_level=error (clause=is, ok)
    schema: 
      - hash
      - is
      - &3 
        a: 0
    valid: 1
  - 
    input: &5 
      a: 1
    name: .err_level=error (clause=is, nok)
    schema: 
      - hash
      - is
      - *3
    valid: 0
  - 
    input: *4
    name: .err_level=warn (clause=is, ok)
    schema: 
      - hash
      - is
      - *3
      - is.err_level
      - warn
    valid: 1
  - 
    input: *5
    name: .err_level=warn (clause=is, nok)
    schema: 
      - hash*
      - is
      - *3
      - is.err_level
      - warn
    valid: 1
    warnings: 1
  - 
    input: &6 {}

    name: "is: must accept same value"
    schema: 
      - hash
      - is
      - *6
    valid: 1
  - 
    input: *6
    name: "is: must reject different value"
    schema: 
      - hash
      - is
      - &7 
        a: 1
    valid: 0
  - 
    input: *6
    name: "!is (nok)"
    schema: 
      - hash
      - "!is"
      - *6
    valid: 0
  - 
    input: *6
    name: "!is (ok)"
    schema: 
      - hash
      - "!is"
      - *7
    valid: 1
  - 
    input: *6
    name: is.op=not (nok)
    schema: 
      - hash
      - is
      - *6
      - is.op
      - not
    valid: 0
  - 
    input: *6
    name: is.op=not (ok)
    schema: 
      - hash
      - is
      - *7
      - is.op
      - not
    valid: 1
  - 
    input: *6
    name: is& (no items)
    schema: 
      - hash
      - is&
      - []

    valid: 1
  - 
    input: *6
    name: is& (ok)
    schema: 
      - hash
      - is&
      - &8 
        - *6
        - *6
    valid: 1
  - 
    errors: 1
    input: *6
    name: is& (nok + ok)
    schema: 
      - hash
      - is&
      - 
        - *7
        - *6
    valid: 0
  - 
    errors: 1
    input: *6
    name: is& (ok + nok)
    schema: 
      - hash
      - is&
      - 
        - *6
        - *7
    valid: 0
  - 
    errors: 1
    input: *6
    name: is& (nok + nok)
    schema: 
      - hash
      - is&
      - 
        - *7
        - *7
    valid: 0
  - 
    input: *6
    name: is.op=and (no items)
    schema: 
      - hash
      - is
      - []

      - is.op
      - and
    valid: 1
  - 
    input: *6
    name: is.op=and (ok)
    schema: 
      - hash
      - is
      - *8
      - is.op
      - and
    valid: 1
  - 
    errors: 1
    input: *6
    name: is.op=and (nok + ok)
    schema: 
      - hash
      - is
      - 
        - *7
        - *6
      - is.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=and (ok + nok)
    schema: 
      - hash
      - is
      - 
        - *6
        - *7
      - is.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=and (nok + nok)
    schema: 
      - hash
      - is
      - 
        - *7
        - *7
      - is.op
      - and
    valid: 0
  - 
    input: *6
    name: is| (no items)
    schema: 
      - hash
      - is|
      - []

    valid: 1
  - 
    input: *6
    name: is| (ok)
    schema: 
      - hash
      - is|
      - *8
    valid: 1
  - 
    input: *6
    name: is| (nok + ok)
    schema: 
      - hash
      - is|
      - 
        - *7
        - *6
    valid: 1
  - 
    input: *6
    name: is| (ok + nok)
    schema: 
      - hash
      - is|
      - 
        - *6
        - *7
    valid: 1
  - 
    errors: 1
    input: *6
    name: is| (nok + nok)
    schema: 
      - hash
      - is|
      - 
        - *7
        - *7
    valid: 0
  - 
    input: *6
    name: is.op=or (no items)
    schema: 
      - hash
      - is
      - []

      - is.op
      - or
    valid: 1
  - 
    input: *6
    name: is.op=or (ok)
    schema: 
      - hash
      - is
      - *8
      - is.op
      - or
    valid: 1
  - 
    input: *6
    name: is.op=or (nok + ok)
    schema: 
      - hash
      - is
      - 
        - *7
        - *6
      - is.op
      - or
    valid: 1
  - 
    input: *6
    name: is.op=or (ok + nok)
    schema: 
      - hash
      - is
      - 
        - *6
        - *7
      - is.op
      - or
    valid: 1
  - 
    errors: 1
    input: *6
    name: is.op=or (nok + nok)
    schema: 
      - hash
      - is
      - 
        - *7
        - *7
      - is.op
      - or
    valid: 0
  - 
    input: *6
    name: is.op=none (empty items)
    schema: 
      - hash
      - is
      - []

      - is.op
      - none
    valid: 1
  - 
    input: *6
    name: is.op=none (nok + nok)
    schema: 
      - hash
      - is
      - 
        - *7
        - *7
      - is.op
      - none
    valid: 1
  - 
    errors: 1
    input: *6
    name: is.op=none (nok + ok)
    schema: 
      - hash
      - is
      - 
        - *7
        - *6
      - is.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=none (ok + nok)
    schema: 
      - hash
      - is
      - 
        - *6
        - *7
      - is.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: is.op=none (ok + ok)
    schema: 
      - hash
      - is
      - *8
      - is.op
      - none
    valid: 0
  - 
    input: *6
    name: "in: must accept valid choices"
    schema: 
      - hash
      - in
      - &9 
        - *6
        - *7
    valid: 1
  - 
    input: *6
    name: "in: must reject empty choices"
    schema: 
      - hash
      - in
      - []

    valid: 0
  - 
    input: *6
    name: "!in (nok)"
    schema: 
      - hash
      - "!in"
      - *9
    valid: 0
  - 
    input: *6
    name: "!in (ok)"
    schema: 
      - hash
      - "!in"
      - &10 []

    valid: 1
  - 
    input: *6
    name: in.op=not (nok)
    schema: 
      - hash
      - in
      - *9
      - in.op
      - not
    valid: 0
  - 
    input: *6
    name: in.op=not (ok)
    schema: 
      - hash
      - in
      - *10
      - in.op
      - not
    valid: 1
  - 
    input: *6
    name: in& (no items)
    schema: 
      - hash
      - in&
      - []

    valid: 1
  - 
    input: *6
    name: in& (ok)
    schema: 
      - hash
      - in&
      - &11 
        - *9
        - 
          - {}

          - 
            a: 1
    valid: 1
  - 
    errors: 1
    input: *6
    name: in& (nok + ok)
    schema: 
      - hash
      - in&
      - 
        - *10
        - *9
    valid: 0
  - 
    errors: 1
    input: *6
    name: in& (ok + nok)
    schema: 
      - hash
      - in&
      - 
        - *9
        - *10
    valid: 0
  - 
    errors: 1
    input: *6
    name: in& (nok + nok)
    schema: 
      - hash
      - in&
      - 
        - *10
        - &12 []

    valid: 0
  - 
    input: *6
    name: in.op=and (no items)
    schema: 
      - hash
      - in
      - []

      - in.op
      - and
    valid: 1
  - 
    input: *6
    name: in.op=and (ok)
    schema: 
      - hash
      - in
      - *11
      - in.op
      - and
    valid: 1
  - 
    errors: 1
    input: *6
    name: in.op=and (nok + ok)
    schema: 
      - hash
      - in
      - 
        - *10
        - *9
      - in.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=and (ok + nok)
    schema: 
      - hash
      - in
      - 
        - *9
        - *10
      - in.op
      - and
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=and (nok + nok)
    schema: 
      - hash
      - in
      - 
        - *10
        - *12
      - in.op
      - and
    valid: 0
  - 
    input: *6
    name: in| (no items)
    schema: 
      - hash
      - in|
      - []

    valid: 1
  - 
    input: *6
    name: in| (ok)
    schema: 
      - hash
      - in|
      - *11
    valid: 1
  - 
    input: *6
    name: in| (nok + ok)
    schema: 
      - hash
      - in|
      - 
        - *10
        - *9
    valid: 1
  - 
    input: *6
    name: in| (ok + nok)
    schema: 
      - hash
      - in|
      - 
        - *9
        - *10
    valid: 1
  - 
    errors: 1
    input: *6
    name: in| (nok + nok)
    schema: 
      - hash
      - in|
      - 
        - *10
        - *12
    valid: 0
  - 
    input: *6
    name: in.op=or (no items)
    schema: 
      - hash
      - in
      - []

      - in.op
      - or
    valid: 1
  - 
    input: *6
    name: in.op=or (ok)
    schema: 
      - hash
      - in
      - *11
      - in.op
      - or
    valid: 1
  - 
    input: *6
    name: in.op=or (nok + ok)
    schema: 
      - hash
      - in
      - 
        - *10
        - *9
      - in.op
      - or
    valid: 1
  - 
    input: *6
    name: in.op=or (ok + nok)
    schema: 
      - hash
      - in
      - 
        - *9
        - *10
      - in.op
      - or
    valid: 1
  - 
    errors: 1
    input: *6
    name: in.op=or (nok + nok)
    schema: 
      - hash
      - in
      - 
        - *10
        - *12
      - in.op
      - or
    valid: 0
  - 
    input: *6
    name: in.op=none (empty items)
    schema: 
      - hash
      - in
      - []

      - in.op
      - none
    valid: 1
  - 
    input: *6
    name: in.op=none (nok + nok)
    schema: 
      - hash
      - in
      - 
        - *10
        - *12
      - in.op
      - none
    valid: 1
  - 
    errors: 1
    input: *6
    name: in.op=none (nok + ok)
    schema: 
      - hash
      - in
      - 
        - *10
        - *9
      - in.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=none (ok + nok)
    schema: 
      - hash
      - in
      - 
        - *9
        - *10
      - in.op
      - none
    valid: 0
  - 
    errors: 1
    input: *6
    name: in.op=none (ok + ok)
    schema: 
      - hash
      - in
      - *11
      - in.op
      - none
    valid: 0
  - 
    input: &13 
      a: 1
    name: len (ok)
    schema: 
      - hash
      - len
      - 1
    valid: 1
  - 
    input: *13
    name: len (nok)
    schema: 
      - hash
      - len
      - 2
    valid: 0
  - 
    input: *13
    name: min_len (ok)
    schema: 
      - hash
      - min_len
      - 1
    valid: 1
  - 
    input: *13
    name: min_len (nok)
    schema: 
      - hash
      - min_len
      - 2
    valid: 0
  - 
    input: *13
    name: max_len (ok)
    schema: 
      - hash
      - min_len
      - 1
    valid: 1
  - 
    input: &14 
      a: 1
      b: '1.1'
    name: max_len (nok)
    schema: 
      - hash
      - max_len
      - 1
    valid: 0
  - 
    input: *13
    name: len_between (ok)
    schema: 
      - hash
      - len_between
      - 
        - 1
        - 2
    valid: 1
  - 
    input: *14
    name: len_between (nok)
    schema: 
      - hash
      - len_between
      - 
        - 1
        - 1
    valid: 0
  - 
    input: *14
    name: each_index (ok)
    schema: 
      - hash
      - each_index
      - 
        - str
        - len
        - 1
    valid: 1
  - 
    input: *14
    name: each_index (nok)
    schema: 
      - hash
      - each_index
      - 
        - str
        - len
        - 2
    valid: 0
  - 
    input: *14
    name: each_elem (ok)
    schema: 
      - hash
      - each_elem
      - float
    valid: 1
  - 
    input: *14
    name: each_elem (nok)
    schema: 
      - hash
      - each_elem
      - int
    valid: 0
  - 
    input: {}

    name: "keys: (ok, empty)"
    schema: &15 
      - hash
      - 
        keys: 
          a: int
          b: float*
    valid: 1
  - 
    input: 
      a: ~
    name: "keys: (ok, only a, a valid 1)"
    schema: *15
    valid: 1
  - 
    input: 
      a: 1
    name: "keys: (ok, only a, a valid 2)"
    schema: *15
    valid: 1
  - 
    input: 
      a: '1.1'
    name: "keys: (nok, only a, a invalid)"
    schema: *15
    valid: 0
  - 
    input: 
      a: 1
    name: "keys: (ok, only a, valid 2)"
    schema: *15
    valid: 1
  - 
    input: 
      a: 1
      b: '1.1'
    name: "keys: (ok, a & b, valid)"
    schema: *15
    valid: 1
  - 
    input: 
      a: 1
      b: ~
    name: "keys: (nok, a & b, b invalid)"
    schema: *15
    valid: 0
  - 
    input: 
      a: '1.1'
      b: '1.1'
    name: "keys: (nok, a & b, a invalid)"
    schema: *15
    valid: 0
  - 
    input: 
      a: '1.1'
      b: ~
    name: "keys: (nok, a & b, a & b invalid)"
    schema: *15
    valid: 0
  - 
    input: 
      a: 1
      b: '1.1'
      c: 1
    name: "keys: (nok, extra)"
    schema: *15
    valid: 0
  - 
    input: 
      a: 1
      b: '1.1'
      c: 1
    name: "keys: (ok, extra, restrict=0)"
    schema: *15
    valid: 0
  - 
    input: {}

    name: keys (create_default=1) 1
    output: 
      b: 2
    schema: &16 
      - hash
      - 
        keys: 
          a: int
          b: 
            - int
            - default
            - 2
    valid: 1
  - 
    input: 
      b: ~
    name: keys (create_default=1) 2
    output: 
      b: 2
    schema: *16
    valid: 1
  - 
    input: {}

    name: keys (create_default=0) 1
    output: {}

    schema: &17 
      - hash
      - 
        keys: 
          a: int
          b: 
            - int
            - default
            - 2
        keys.create_default: 0
    valid: 1
  - 
    input: 
      b: ~
    name: keys (create_default=0) 2
    output: 
      b: 2
    schema: *17
    valid: 1
version: v0.9.23 (generated by devscripts/gen-type-spectest on Wed Jan 30 10:27:52 2013)
